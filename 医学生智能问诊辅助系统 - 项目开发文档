# åŒ»å­¦ç”Ÿæ™ºèƒ½é—®è¯Šè¾…åŠ©ç³»ç»Ÿ - é¡¹ç›®å¼€å‘æ–‡æ¡£

## é¡¹ç›®æ¦‚è¿°

### é¡¹ç›®åç§°
MedStudent Interview Assistant (MSIA) - åŒ»å­¦ç”Ÿæ™ºèƒ½é—®è¯Šè¾…åŠ©ç³»ç»Ÿ

### é¡¹ç›®æ„¿æ™¯
ä¸ºåŒ»å­¦ç”Ÿå’Œåˆçº§ä¸´åºŠåŒ»ç”Ÿå¼€å‘ä¸€æ¬¾åŸºäº Web çš„æ™ºèƒ½å¼•å¯¼å¼é—®è¯Šè¾…åŠ©å·¥å…·ï¼Œé€šè¿‡ç»“æ„åŒ–é—®è¯Šæ¸…å•å’Œæ™ºèƒ½æç¤ºç³»ç»Ÿï¼Œå¸®åŠ©ç”¨æˆ·ç³»ç»Ÿæ€§åœ°å®Œæˆç—…å²é‡‡é›†ï¼Œé¿å…é—æ¼å…³é”®ä¿¡æ¯ï¼Œæé«˜é—®è¯Šæ•ˆç‡å’Œç—…å†ä¹¦å†™è´¨é‡ã€‚æ”¯æŒ PC ç«¯å’Œç§»åŠ¨ç«¯è®¿é—®ï¼ˆå“åº”å¼è®¾è®¡ï¼‰ã€‚

### æ ¸å¿ƒä»·å€¼
- **æ•™å­¦ä»·å€¼**ï¼šå¸®åŠ©åŒ»å­¦ç”Ÿå»ºç«‹ç³»ç»ŸåŒ–é—®è¯Šæ€ç»´
- **ä¸´åºŠä»·å€¼**ï¼šå‡å°‘ä¿¡æ¯é—æ¼ï¼Œæé«˜ç—…å²é‡‡é›†å®Œæ•´æ€§
- **æ•ˆç‡ä»·å€¼**ï¼šç»“æ„åŒ–æ•°æ®è¾“å…¥ï¼Œè‡ªåŠ¨ç”Ÿæˆç—…å†è‰ç¨¿

### å½“å‰çŠ¶æ€
**é¡¹ç›®é˜¶æ®µ**ï¼šPhase 1 MVP å·²å®Œæˆï¼ŒPhase 2 æ™ºèƒ½å¢å¼ºå·²å®Œæˆï¼ŒPhase 3 æ‰©å±•ä¼˜åŒ–å·²å®Œæˆï¼ŒPhase 4 å®‰å…¨åŠ å›ºå·²å®Œæˆ
**æœ€åæ›´æ–°**ï¼š2026å¹´3æœˆ

---

## å·²å®Œæˆçš„åŠŸèƒ½

### âœ… æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

#### 1. æ™ºèƒ½å¯¼èˆªä¸è¿›åº¦ç®¡ç†
- [x] ä¾§è¾¹æ å¯¼èˆªæ˜¾ç¤ºé—®è¯Šç»“æ„æ ‘
- [x] å®æ—¶æ˜¾ç¤ºå„æ¨¡å—å®ŒæˆçŠ¶æ€
- [x] ä¸€é”®è·³è½¬åˆ°ä»»æ„æ¨¡å—
- [x] è¿›åº¦ç™¾åˆ†æ¯”æ˜¾ç¤º

#### 2. ä¸€èˆ¬é¡¹ç›®æ¨¡å—
- [x] æ‚£è€…åŸºæœ¬ä¿¡æ¯å½•å…¥ï¼ˆå§“åã€æ€§åˆ«ã€å¹´é¾„ç­‰ï¼‰
- [x] ç—…å²é™ˆè¿°è€…ä¿¡æ¯
- [x] è‡ªåŠ¨è®¡ç®—å¹´é¾„
- [x] æ•°æ®å¯é æ€§è¯„ä¼°

#### 3. ä¸»è¯‰æ™ºèƒ½è§£ææ¨¡å—
- [x] ä¸»è¯‰æ–‡æœ¬è¾“å…¥
- [x] ç»“æ„åŒ–ä¸»è¯‰å±•ç¤º
- [x] ç—‡çŠ¶å…³é”®è¯æå–

#### 4. ç°ç—…å²åŠ¨æ€é—®è¯Šå¼•æ“ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰
- [x] ç—‡çŠ¶çŸ¥è¯†åº“ï¼ˆ33ç§ç—‡çŠ¶ï¼‰
- [x] åŠ¨æ€é—®é¢˜ç”Ÿæˆ
- [x] HPIï¼ˆç°ç—…å²ï¼‰ç»“æ„åŒ–å½•å…¥
- [x] ç—‡çŠ¶ä¸¥é‡ç¨‹åº¦è¯„ä¼°

#### 5. å…¶ä»–ç—…å²æ¨¡å—
- [x] æ—¢å¾€å²ï¼ˆç–¾ç—…ã€æ‰‹æœ¯ã€å¤–ä¼¤ã€è¾“è¡€å²ï¼‰
- [x] ä¸ªäººå²ï¼ˆå¸çƒŸã€é¥®é…’ã€è¯ç‰©ä½¿ç”¨ï¼‰
- [x] å©šè‚²å²/æœˆç»å²ï¼ˆå¥³æ€§æ‚£è€…ï¼‰
- [x] å®¶æ—å²
- [x] ç³»ç»Ÿå›é¡¾

#### 6. ä½“æ ¼æ£€æŸ¥æ¨¡å—
- [x] ä¸€èˆ¬æƒ…å†µæ£€æŸ¥
- [x] ä¸“ç§‘æ£€æŸ¥å½•å…¥
- [x] è¾…åŠ©æ£€æŸ¥è®°å½•

#### 7. æ™ºèƒ½æç¤ºä¸å­¦ä¹ ç³»ç»Ÿ
- [x] åŒ»å­¦çŸ¥è¯†åº“é›†æˆ
- [x] æ™ºèƒ½åŠ©æ‰‹åŠŸèƒ½
- [x] çŸ¥è¯†é¢æ¿å±•ç¤º

#### 8. è¯Šæ–­è¾…åŠ©åŠŸèƒ½
- [x] æ™ºèƒ½è¯Šæ–­å»ºè®®
- [x] ç—‡çŠ¶å…³è”å›¾è°±
- [x] é‰´åˆ«è¯Šæ–­è¦ç‚¹

#### 9. æ•°æ®ç®¡ç†
- [x] é—®è¯Šä¼šè¯åˆ—è¡¨
- [x] æ‚£è€…åˆ—è¡¨ç®¡ç†
- [x] æ•°æ®æŒä¹…åŒ–å­˜å‚¨
- [x] ç—…å†è‰ç¨¿ç”Ÿæˆ

---

## æŠ€æœ¯å®ç°

### æŠ€æœ¯æ ˆ

**å‰ç«¯ (Web Client)**ï¼š
- **Framework**: React 19
- **Language**: TypeScript 5+
- **Build Tool**: Vite 7
- **UI Library**: Ant Design 6
- **State**: Zustand
- **Network**: Axios + React Query
- **Testing**: Vitest

**åç«¯ (Server API)**ï¼š
- **Framework**: Node.js + Express 5
- **Language**: TypeScript 5+
- **API Style**: RESTful API
- **ORM**: Prisma 6

**æ•°æ®åº“ (Database)**ï¼š
- **RDBMS**: PostgreSQL 16
- **Connection**: pg + @prisma/adapter-pg

**éƒ¨ç½² (Deployment)**ï¼š
- **Container**: Docker + Docker Compose
- **Web Server**: Nginx (å‰ç«¯)
- **Process Manager**: systemd (å¯é€‰)

### ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             Web Client (React)          â”‚
â”‚   (Pages, Components, Zustand Store)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ HTTPS / JSON
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             API Server (Express)        â”‚
â”‚      (Auth, Validation, Logic)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚            Service Layer                â”‚
â”‚   (Diagnosis, Knowledge, Session)       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚             Data Access Layer           â”‚
â”‚              (Prisma ORM)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ TCP / SQL
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            PostgreSQL Database          â”‚
â”‚   (Patients, Sessions, Knowledge)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## é¡¹ç›®ç»“æ„

```
åŒ»å­¦ç”Ÿæ™ºèƒ½é—®è¯Šè¾…åŠ©ç³»ç»Ÿï¼ˆMSIAï¼‰/
â”œâ”€â”€ ğŸ“ client/                    # å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ ğŸ“ src/
â”‚   â”‚   â”œâ”€â”€ ğŸ“ pages/            # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ Home/         # é¦–é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ Interview/    # é—®è¯Šæ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ KnowledgeList/# çŸ¥è¯†åº“åˆ—è¡¨
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ SessionList/  # ä¼šè¯åˆ—è¡¨
â”‚   â”‚   â”œâ”€â”€ ğŸ“ components/       # å…¬å…±ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ğŸ“ store/            # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ ğŸ“ utils/            # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ ğŸ“ router/           # è·¯ç”±é…ç½®
â”‚   â”œâ”€â”€ ğŸ“„ package.json
â”‚   â”œâ”€â”€ ğŸ“„ vite.config.ts
â”‚   â”œâ”€â”€ ğŸ“„ Dockerfile            # å‰ç«¯å®¹å™¨é…ç½®
â”‚   â””â”€â”€ ğŸ“„ nginx.conf            # Nginxé…ç½®
â”‚
â”œâ”€â”€ ğŸ“ server/                    # åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ ğŸ“ src/
â”‚   â”‚   â”œâ”€â”€ ğŸ“ controllers/      # æ§åˆ¶å™¨
â”‚   â”‚   â”œâ”€â”€ ğŸ“ services/         # ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ ğŸ“ routes/           # è·¯ç”±å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ ğŸ“ middleware/       # ä¸­é—´ä»¶
â”‚   â”‚   â”œâ”€â”€ ğŸ“ validators/       # æ•°æ®éªŒè¯
â”‚   â”‚   â”œâ”€â”€ ğŸ“ utils/            # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ ğŸ“ config/           # é…ç½®æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ ğŸ“ types/            # ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ ğŸ“ prisma/               # æ•°æ®åº“æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ schema.prisma     # Prismaæ¨¡å‹
â”‚   â”‚   â””â”€â”€ ğŸ“ migrations/       # æ•°æ®åº“è¿ç§»
â”‚   â”œâ”€â”€ ğŸ“ knowledge_base/       # ç—‡çŠ¶çŸ¥è¯†åº“(33ä¸ªJSON)
â”‚   â”œâ”€â”€ ğŸ“„ package.json
â”‚   â”œâ”€â”€ ğŸ“„ Dockerfile            # åç«¯å®¹å™¨é…ç½®
â”‚   â””â”€â”€ ğŸ“„ docker-entrypoint.sh  # å®¹å™¨å…¥å£è„šæœ¬
â”‚
â”œâ”€â”€ ğŸ“ deploy/                    # éƒ¨ç½²é…ç½®
â”‚   â”œâ”€â”€ ğŸ“„ docker-deploy.md      # Dockeréƒ¨ç½²æ–‡æ¡£
â”‚   â”œâ”€â”€ ğŸ“„ nginx.conf            # Nginxé…ç½®ç¤ºä¾‹
â”‚   â””â”€â”€ ğŸ“„ systemd.service       # ç³»ç»ŸæœåŠ¡é…ç½®
â”‚
â”œâ”€â”€ ğŸ“ scripts/                   # éƒ¨ç½²è„šæœ¬
â”‚   â”œâ”€â”€ ğŸ“„ deploy.sh             # éƒ¨ç½²è„šæœ¬
â”‚   â”œâ”€â”€ ğŸ“„ init-db.sh            # æ•°æ®åº“åˆå§‹åŒ–
â”‚   â””â”€â”€ ğŸ“„ backup.sh             # å¤‡ä»½è„šæœ¬
â”‚
â”œâ”€â”€ ğŸ“„ docker-compose.yml         # Dockerç¼–æ’é…ç½®
â”œâ”€â”€ ğŸ“„ docker-compose.override.yml # å¼€å‘ç¯å¢ƒé…ç½®
â”œâ”€â”€ ğŸ“„ .env.docker               # Dockerç¯å¢ƒå˜é‡æ¨¡æ¿
â”œâ”€â”€ ğŸ“„ .dockerignore             # Dockerå¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ ğŸ“„ Makefile                  # å¿«æ·å‘½ä»¤
â””â”€â”€ ğŸ“„ DOCKER_DEPLOY.md          # Dockeréƒ¨ç½²æŒ‡å—
```

---

## æ•°æ®æ¨¡å‹

### æ ¸å¿ƒæ•°æ®è¡¨

#### 1. æ‚£è€…è¡¨ (patients)
```sql
- id: ä¸»é”®
- name: å§“å
- gender: æ€§åˆ«
- birth_date: å‡ºç”Ÿæ—¥æœŸ
- contact_info: è”ç³»ä¿¡æ¯(JSON)
- created_at: åˆ›å»ºæ—¶é—´
```

#### 2. é—®è¯Šä¼šè¯è¡¨ (interview_sessions)
```sql
- id: ä¸»é”®
- patient_id: æ‚£è€…ID(å¤–é”®)
- status: çŠ¶æ€(draft/completed/archived)
- general_info: ä¸€èˆ¬é¡¹ç›®(JSON)
- chief_complaint: ä¸»è¯‰(JSON)
- present_illness: ç°ç—…å²(JSON)
- past_history: æ—¢å¾€å²(JSON)
- personal_history: ä¸ªäººå²(JSON)
- family_history: å®¶æ—å²(JSON)
- physical_exam: ä½“æ ¼æ£€æŸ¥(JSON)
- created_at/updated_at: æ—¶é—´æˆ³
```

#### 3. ç—‡çŠ¶çŸ¥è¯†åº“è¡¨ (symptom_knowledge)
```sql
- id: ä¸»é”®
- symptom_key: ç—‡çŠ¶æ ‡è¯†
- display_name: æ˜¾ç¤ºåç§°
- required_questions: å¿…é—®é—®é¢˜(JSON)
- associated_symptoms: å…³è”ç—‡çŠ¶(JSON)
- red_flags: è­¦ç¤ºå¾è±¡(JSON)
- physical_examination: ä½“æ ¼æ£€æŸ¥è¦ç‚¹
- differential_points: é‰´åˆ«è¯Šæ–­è¦ç‚¹
```

#### 4. è¯Šæ–­è¡¨ (diagnoses)
```sql
- id: ä¸»é”®
- name: è¯Šæ–­åç§°
- category: åˆ†ç±»
- symptoms: å…³è”ç—‡çŠ¶
- red_flags: è­¦ç¤ºå¾è±¡
```

---

## éƒ¨ç½²æ–¹å¼

### æ–¹å¼ä¸€ï¼šDocker éƒ¨ç½²ï¼ˆæ¨èï¼‰

```bash
# 1. é…ç½®ç¯å¢ƒå˜é‡
cp .env.docker .env

# 2. ä½¿ç”¨ Makefile éƒ¨ç½²
make deploy

# 3. è®¿é—®åº”ç”¨
# å‰ç«¯: http://localhost
# API: http://localhost:4000
```

### æ–¹å¼äºŒï¼šæ‰‹åŠ¨éƒ¨ç½²

```bash
# åç«¯
cd server
npm install
npx prisma migrate deploy
npm run build
npm start

# å‰ç«¯
cd client
npm install
npm run build
# ä½¿ç”¨ Nginx æˆ–å…¶ä»–æœåŠ¡å™¨æ‰˜ç®¡ dist ç›®å½•
```

---

## å¼€å‘è·¯çº¿å›¾

### Phase 1ï¼šMVP âœ… å·²å®Œæˆ
- [x] åŸºç¡€é—®è¯ŠåŠŸèƒ½
- [x] æ•°æ®æŒä¹…åŒ–
- [x] ç—‡çŠ¶çŸ¥è¯†åº“(33ç§)
- [x] Docker éƒ¨ç½²æ”¯æŒ

### Phase 2ï¼šæ™ºèƒ½å¢å¼º âœ… å·²å®Œæˆ
- [x] æ™ºèƒ½è¯Šæ–­å»ºè®®
- [x] ç—‡çŠ¶å›¾è°±å¯è§†åŒ–
- [x] ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
- [x] æ•°æ®ç»Ÿè®¡ Dashboard

### Phase 3ï¼šæ‰©å±•ä¸ä¼˜åŒ– âœ… å·²å®Œæˆ
- [x] ç§»åŠ¨ç«¯ UI ä¼˜åŒ–
- [x] ç—…å†å¯¼å‡º Word/PDF

### Phase 4ï¼šå®‰å…¨åŠ å›º âœ… å·²å®Œæˆ
- [x] å¼€å‘ Token ç»•è¿‡è®¤è¯ä¿®å¤
- [x] Cookie secure é…ç½®ä¼˜åŒ–
- [x] SQL æ³¨å…¥é˜²æŠ¤å¢å¼º
- [x] localStorage æ•æ„Ÿä¿¡æ¯ç§»é™¤
- [x] ç¯å¢ƒå˜é‡éªŒè¯å¢å¼º
- [x] CORS é…ç½®ä¼˜åŒ–
- [x] ä¾èµ–å®‰å…¨æ¼æ´ä¿®å¤

---

## æœ€è¿‘æ›´æ–°

### 2026å¹´3æœˆ
1. âœ… æ–‡æ¡£æ›´æ–°ä¸ä¿®æ­£
   - ä¿®æ­£ç—‡çŠ¶çŸ¥è¯†åº“æ•°é‡ä¸º33ç§
   - ç»Ÿä¸€æ‰€æœ‰æ–‡æ¡£ç‰ˆæœ¬å·è‡³v2.2
   - æ›´æ–°é¡¹ç›®é˜¶æ®µçŠ¶æ€

### 2026å¹´2æœˆ
1. âœ… å®Œæˆ Docker éƒ¨ç½²é…ç½®
2. âœ… æ·»åŠ æ™ºèƒ½è¯Šæ–­åŠŸèƒ½
3. âœ… å®ç°ç—‡çŠ¶å…³è”å›¾è°±
4. âœ… é¡¹ç›®ç›®å½•æ¸…ç†ä¼˜åŒ–
5. âœ… å®‰å…¨åŠ å›ºæ›´æ–°

---

## é™„å½•

### ç«¯å£é…ç½®
- å‰ç«¯: 80 (Nginx)
- åç«¯ API: 4000
- æ•°æ®åº“: 5432 (PostgreSQL)

### ç¯å¢ƒè¦æ±‚
- Node.js 20+
- PostgreSQL 16+
- Docker 20.10+ (å¯é€‰)

### æ–‡æ¡£ç‰ˆæœ¬
**ç‰ˆæœ¬**: v2.2
**æœ€åæ›´æ–°**: 2026å¹´3æœˆ
